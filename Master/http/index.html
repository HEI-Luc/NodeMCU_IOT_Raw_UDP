<html><head>
<meta  name="viewport" http-equiv="content-type" content="text/html; initial-scale=1.0; maximum-scale=1.0; user-scalable=0; charset=windows-1252">

<script language="javascript"> 

function toHex(n) {
  var hex = n.toString(16);
  while (hex.length < 2) {hex = "0" + hex; }
  return hex;
}

function White(){
	var Wrange,Hrange, h, p ;
	
	Hrange = document.getElementById("Temperature");
	Wrange = document.getElementById("Pwhite");
	
	h=Hrange.value/100;
	
	var r, g, b,w;
	
	// mini chaud 255&G=95&B=0&W=255
	
	//neutre 255 172 64
	//255 255 255

	if(h<(1/2))
	{
		console.log("step1");
		r=1;
		g=2*h;
		b=0;	
	}
	else if(h<(2/2))
	{
		console.log("step2");
		r=1;
		g=1;
		b=2*(h-(1/2));
	}
	
	var P_affichage=(Wrange.value*2.55)/4;
	var P_led=(Wrange.value*2.55)/8;
	
	var rA=Math.round(r*p+3*p);
	var gA=Math.round(g*p+3*p);
	var bA=Math.round(b*p+3*p);
	
	r=Math.round(r*P_led*3+P_led);
	g=Math.round(g*P_led*3+P_led);
	b=Math.round(b*P_led*3+P_led);
	w=Math.round(4*P_led);
	
	var rgbHex=toHex(r)+toHex(g)+toHex(b);
	var rgb="R="+r+"&G="+g+"&B="+b+"&W="+w;
	
	console.log(r+" "+g+" "+b+" "+rgbHex);
	//console.log(rgb);
	
	document.getElementById("fond").style.backgroundColor = rgbHex;
	return  rgb;
}

function Color(){

	var Crange,Hrange, h, l, s ;
	
	Crange = document.getElementById("Pcolor");
	Hrange = document.getElementById("Hue");
	
	h=Hrange.value/100;
	l=Crange.value/200;
	
	s=1; // saturation maximale
	
    var r, g, b;
    var rHSV, gHSV, bHSV;

	var hue2rgb = function hue2rgb(p, q, t){
		if(t < 0) t += 1;
		if(t > 1) t -= 1;
		if(t < 1/6) return p + (q - p) * 6 * t;
		if(t < 1/2) return q;
		if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;
		return p;
	}

	var q = l < 0.5 ? l * (1 + s) : l + s - l * s;
	var p = 2 * l - q;
	rHSV = hue2rgb(p, q, h + 1/3);
	gHSV = hue2rgb(p, q, h);
	bHSV = hue2rgb(p, q, h - 1/3);
  
	
	rHSV=Math.round(rHSV*255);
	gHSV=Math.round(gHSV*255);
	bHSV=Math.round(bHSV*255);
	
	
	var rgbHex=toHex(rHSV)+toHex(gHSV)+toHex(bHSV);
	
	var rgbHSV="W=0&R="+rHSV+"&G="+gHSV+"&B="+bHSV;
	
	//console.log(r+" "+g+" "+b+" "+l+" "+w+" "+diviseur+ " "+rgbHex);
	//console.log(rgbHSV);
	
	document.getElementById("fond").style.backgroundColor = rgbHex;
	return  rgbHSV;
}


 function loadXML(type) 
	{ 
		var xmlhttp;
		if (window.XMLHttpRequest)   
		{   
			xmlhttp=new XMLHttpRequest();   
		} 
		else   
		{   
			xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");   
		} 
		var Crange,Hrange,Wrange;
		Crange = document.getElementById("Pcolor");
		Hrange = document.getElementById("Hue");
		Wrange = document.getElementById("Pwhite");
		
		
		if (type == 1) // blanc
		{ 
			Crange.value=Wrange.value;
			
			W= Wrange.value*255/100;
			W=Math.round(W);
			
			rgb=White();
		}
		else if (type == 2) // couleur
		{
			Wrange.value=Crange.value;
			W=0
			
			rgb=Color();
		}
		else
		{
			
		}
		
		
		
		var Rnode = document.getElementById("R1");
		var node ="";
		if (Rnode.checked)
			node="&Node=1";
		else
		{
			Rnode = document.getElementById("R2");
			if (Rnode.checked)
				node="&Node=2";
		}	
		
		var node1_on ="";
		var node2_on ="";
		var Ron = document.getElementById("CTOUT");
		if (Ron.checked)
		{
			node1_on="&Off1=1";
			node2_on="&Off2=1";
		}
		
		var Ron1 = document.getElementById("C1");
		if (Ron1.checked)
			node1_on="&Off1=1";
		
		var Ron2 = document.getElementById("C2");
		
		if (Ron2.checked)
			node2_on="&Off2=1";
	
		xmlhttp.open("GET","Rainbow.lua?"+rgb+node+node1_on+node2_on ,true); xmlhttp.send(); 
		
	} 
</script> 

<style>

input[type=range].slider {
  -webkit-appearance: none;
  width: 80vw;
  margin: -4vh 10vw;
}
input[type=range].slider:focus {
  outline: none;
  
}
input[type=range].slider::-webkit-slider-runnable-track {
  width: 100%;
  height: 6vh;
  cursor: pointer;
  //box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;
 
  background: transparent;
  //background: #68afff;
  background-color: rgba(0, 0, 255, 0);
  
}
input[type=range].slider::-webkit-slider-thumb {
  box-shadow: 0.8px 0.8px 1.9px rgba(0, 0, 62, 0.67), 0px 0px 0.8px rgba(0, 0, 88, 0.67);
  border: 0.4vh solid rgba(255, 255, 255,255);
  height:  6vh;
  width:  2vh;
  //border-radius:  1vh;
  background: #000000;
  cursor: pointer;
  -webkit-appearance: none;
  margin-top: 0px;
}
input[type=range].slider:focus::-webkit-slider-runnable-track {
  //background: #82bdff;
  background: transparent;
}
input[type=range].slider::-moz-range-track {
  width: 100%;
  height: 6vh;
  cursor: pointer;
  box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;
  background: #68afff;
  //border-radius: 1vh;
  border: 0px solid #000100;
}
input[type=range].slider::-moz-range-thumb {
  box-shadow: 0.8px 0.8px 1.9px rgba(0, 0, 62, 0.67), 0px 0px 0.8px rgba(0, 0, 88, 0.67);
  border: 1.9px solid rgba(0, 30, 0, 0.57);
  height:  6vh;
  width:  2vh;
  //border-radius:  1vh;
  background: #007bff;
  cursor: pointer;
}
input[type=range].slider::-ms-track {
  width: 100%;
  height: 6vh;
  cursor: pointer;
  background: transparent;
  border-color: transparent;
  color: transparent;
}
input[type=range].slider::-ms-fill-lower {
  background: #4ea1ff;
  border: 0px solid #000100;
  border-radius:  1vh;
  box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;
}
input[type=range].slider::-ms-fill-upper {
  background: #68afff;
  border: 0px solid #000100;
  border-radius:  1vh;
  box-shadow: 1px 1px 1px #000000, 0px 0px 1px #0d0d0d;
}
input[type=range].slider::-ms-thumb {
  box-shadow: 0.8px 0.8px 1.9px rgba(0, 0, 62, 0.67), 0px 0px 0.8px rgba(0, 0, 88, 0.67);
  border: 1.9px solid rgba(0, 30, 0, 0.57);
  width: 2vh;
  border-radius: 1vh;
  background: #007bff;
  cursor: pointer;
  height: 6vh;
}
input[type=range].slider:focus::-ms-fill-lower {
  background: #68afff;
  background: transparent;
}
input[type=range].slider:focus::-ms-fill-upper {
  background: #82bdff;
  background: transparent;
}

body{
	 min-height:416px;
	 
	 //width: 99vw;
	font: 4vh Arial, Verdana, Geneva, sans-serif;
	background: #dddddd;
	text-align: center;
}
.Onglet {
	font-size: 5vh;
	align: left;
	width: 33.333vw;
	height: 10vh;
	background-color:#2c362f;
	-moz-border-radius:1vh;
	-webkit-border-radius:1vh;
	border-radius:1vh;
	border:1px solid #808080;
	cursor:pointer;
	color:#ffffff;
	padding:0px 0px;
	position:absolute;
	top:0px;
	margin: -1vh 0vw 1vh;
	text-decoration:none;
	text-shadow:0px 1px 0px #2f6627;
}
.Onglet:hover {
	background-color:#000000;
}

#O1{
	left:0vw;
}
#O2{
	left:33.333vw;
}
#O3{
	left:66.666vw;
}
.Onglet:active {
}

.button {
  background: #cfe7fa;
  background: -moz-linear-gradient(top,  #cfe7fa 0%, #6393c1 100%);
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#cfe7fa), color-stop(100%,#6393c1));
  background: -webkit-linear-gradient(top,  #cfe7fa 0%,#6393c1 100%);
  background: -o-linear-gradient(top,  #cfe7fa 0%,#6393c1 100%);
  background: -ms-linear-gradient(top,  #cfe7fa 0%,#6393c1 100%);
  background: linear-gradient(top,  #cfe7fa 0%,#6393c1 100%);
  border: 1px solid #6393c1;
 
  //-webkit-border-radius: 1vh;
  //border-radius: 3vh;
  -webkit-box-shadow: inset 1px 1px 0px rgba(255, 255, 255, .5), inset -1px -1px 0px rgba(0, 0, 0, .5);
  box-shadow: inset 1px 1px 0px rgba(255, 255, 255, .5), inset -1px -1px 0px rgba(0, 0, 0, .5);
  cursor: pointer;
  display: inline-block;
  font: 2vh Arial, Verdana, Geneva, sans-serif;
  line-height: -2vh;
  margin: 0vh 2vh 0vh 2vh;
  padding-right: 1vh;
  width: 9vh;
}

.button:hover .inner {
  opacity: .5;
}

.button input {
  display: none;
}

.button input:checked + .outer .inner {
  opacity: 1;
}

.button .outer {
  background: #2989d8;
  background: -moz-radial-gradient(center, ellipse cover,  #2989d8 0%, #101354 99%);
  background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,#2989d8), color-stop(99%,#101354));
  background: -webkit-radial-gradient(center, ellipse cover,  #2989d8 0%,#101354 99%);
  background: -o-radial-gradient(center, ellipse cover,  #2989d8 0%,#101354 99%);
  background: -ms-radial-gradient(center, ellipse cover,  #2989d8 0%,#101354 99%);
  background: radial-gradient(center, ellipse cover,  #2989d8 0%,#101354 99%);
  border: 1px solid black;
  -moz-border-radius: 10vh;
  //-webkit-border-radius: 1vh;
  //border-radius: 10vh;
  display: block;
  float: left;
  margin: 1vh 1vh 1vh 1vh;
  height: 7vh;
  width: 7vh;
}

.button .inner {
  background: #e4f5fc;
  background: -moz-radial-gradient(center, ellipse cover,  #e4f5fc 0%, #bfe8f9 50%, #9fd8ef 51%, #2ab0ed 100%);
  background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,#e4f5fc), color-stop(50%,#bfe8f9), color-stop(51%,#9fd8ef), color-stop(100%,#2ab0ed));
  background: -webkit-radial-gradient(center, ellipse cover,  #e4f5fc 0%,#bfe8f9 50%,#9fd8ef 51%,#2ab0ed 100%);
  background: -o-radial-gradient(center, ellipse cover,  #e4f5fc 0%,#bfe8f9 50%,#9fd8ef 51%,#2ab0ed 100%);
  background: -ms-radial-gradient(center, ellipse cover,  #e4f5fc 0%,#bfe8f9 50%,#9fd8ef 51%,#2ab0ed 100%);
  background: radial-gradient(center, ellipse cover,  #e4f5fc 0%,#bfe8f9 50%,#9fd8ef 51%,#2ab0ed 100%);
  //-moz-border-radius: 10vh;
  //-webkit-border-radius: 10vh;
  //border-radius: 10vh;
  display: block;
  
  margin: 0.5vh;
  opacity: 0;
  -moz-transition: opacity .5s;
  -webkit-transition: opacity .5s;
  -o-transition: opacity .5s;
  transition: opacity .5s;
  height: 6vh;
  width: 6vh;
}

#curseur{
	//position:absolute;
	//top:8vh;
	
	position:relative;
	margin: 0vh 0vw 8vh 0vw;
}

#Hue {
	background: url('chroma.png');
	background-size: contain;  
}
#Temperature {
	background: url('temperature.png');
	background-size: contain;  
}
#Pwhite, #Pcolor {
	height: 0px;
	background-size: 6vh 80vw;
	margin: -3vh;
}

#right {
    width: 10vw;
    height: 0px;
    border-top: 6vh solid transparent;
    border-right: 80vw solid black;
}

</style>
	</head>
	<body id="fond" onload="setTimeout(function() { window.scrollTo(0, 1) }, 100);">
		
		
		<div>
		<!--
			<div>
				<input type="button" class="Onglet" id="O1" value="Color" 	onclick="self.location.href='index.html'" 		href="index.html"/>
				<input type="button" class="Onglet" id="O2"  value="Selector" onclick="self.location.href='Selector.lua'" 	href="Selector.html"/>
				<input type="button" class="Onglet" id="O3"  value="White" 	onclick="self.location.href='White.html'"  		href="White.html"/>
			</div>
			-->
            <div class="row">
                <label class="button" id="Ball">
                    <input type="radio" name="button" id="Rall"  onchange="loadXML()" checked="true" />
                    Tout
                    <span class="outer"><span class="inner"></span></span>
                </label>
                <label class="button" id="B1">
                    <input type="radio" name="button" id="R1" />
                    Solo 1
                    <span class="outer"><span class="inner"></span></span>
                </label>
                <label class="button" id="B2">
                    <input type="radio" name="button" id="R2" />
                    Solo 2
                    <span class="outer"><span class="inner"></span></span>
                </label>
                
            </div>		
			<div class="row">
				<label class="button" id="BCTOUT">
					<input type="checkbox" name="button" id="CTOUT" />
					Off Tout
					<span class="outer"><span class="inner"></span></span>
				</label><label class="button" id="BC1">
					<input type="checkbox" name="button" id="C1" />
					Off 1
					<span class="outer"><span class="inner"></span></span>
				</label>
				<label class="button" id="BC2">
					<input type="checkbox" name="button" id="C2" />
					Off 2
					<span class="outer"><span class="inner"></span></span>
				</label>
			</div>
			 <div class="row" id="curseur">
				<h4>Lumière Blanche</h4>
				<input type="range" name="points"  onmousemove="White()" onchange="loadXML(1)" value="50" min="0" max="100" class="slider" id="Temperature" >
			
				<h4>Intensité</h4>
				<div id="right">	</div>
				<input type="range" name="points" id="Pwhite" onmousemove="White()" onchange="loadXML(1)"  value="50" min="0" max="100" class="slider" >
				
				
				
			</div>
			
			<div class="row">
				<label class="button" id="Rouge">
                    <input type="radio" name="button" id="RRouge" />
                    Rouge
                    <span class="outer"><span class="inner"></span></span>
                </label>
				<label class="button" id="Orange">
                    <input type="radio" name="button" id="ROrange" />
                    Orange
                    <span class="outer"><span class="inner"></span></span>
                </label>
				<label class="button" id="Jaune">
                    <input type="radio" name="button" id="RJaune" />
                    Jaune
                    <span class="outer"><span class="inner"></span></span>
                </label>
                <label class="button" id="Vert">
                    <input type="radio" name="button" id="RVert" />
                    Vert
                    <span class="outer"><span class="inner"></span></span>
                </label>
                <label class="button" id="Vert">
                    <input type="radio" name="button" id="RVert" />
                    Cyan
                    <span class="outer"><span class="inner"></span></span>
                </label>
                <label class="button" id="Bleu">
                    <input type="radio" name="button" id="RBleu" />
                    Bleu
                    <span class="outer"><span class="inner"></span></span>
                </label>
                <label class="button" id="Bleu">
                    <input type="radio" name="button" id="RBleu" />
                    Violet
                    <span class="outer"><span class="inner"></span></span>
                </label>
                <label class="button" id="Bleu">
                    <input type="radio" name="button" id="RBleu" />
                    Rose
                    <span class="outer"><span class="inner"></span></span>
                </label>
            </div>
			
			<div class="row" id="curseur">
				<h4>Lumière colorée</h4>
				<input type="range" name="points"  onmousemove="Color()" onchange="loadXML(2)" value="50" min="0" max="100" class="slider" id="Hue" >
			
				<h4>Intensité couleur</h4>
				<div id="right">	</div>
				<input type="range" name="points" id="Pcolor" onmousemove="Color()" onchange="loadXML(2)" value="55" min="10" max="100" class="slider" >
				
			</div>
			
			
          
			
		
		
		</div> 

			
	</body>

</html>


